{"version":3,"sources":["../../src/datasource/query_editor.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAQ;;;;;;;;;;;;;;;;;;;;;+BAEF;;;AAEJ,iBAFI,aAEJ,CAAY,MAAZ,EAAoB,SAApB,EAA+B,YAA/B,EAA6C;gCAFzC,eAEyC;;6EAFzC,0BAGI,QAAQ,YAD6B;;AAG3C,gBAAK,YAAL,GAAoB,YAApB,CAH2C;AAI3C,gBAAK,MAAL,CAAY,IAAZ,GAAmB,MAAK,MAAL,CAAY,IAAZ,IAAoB,EAAC,MAAM,aAAN,EAAqB,IAAI,EAAJ,EAA1C,CAJwB;AAK3C,gBAAK,WAAL,GAAmB,aAAa,UAAb,CAAwB;AACzC,mBAAO,MAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB;WADU,CAAnB,CAL2C;;AAS3C,cAAI,MAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,KAA0B,aAA1B,EAAyC;AAC3C,kBAAK,WAAL,CAAiB,IAAjB,GAAwB,IAAxB,CAD2C;WAA7C;uBAT2C;SAA7C;;qBAFI;;qCAgBO;;;AACT,mBAAO,KAAK,UAAL,CAAgB,QAAhB,GAA2B,IAA3B,CAAgC,iBAAS;AAC9C,qBAAK,OAAL,GAAe,EAAf,CAD8C;;AAG9C,qBAAO,MAAM,GAAN,CAAU,gBAAQ;AACvB,uBAAK,OAAL,CAAa,KAAK,IAAL,CAAb,GAA0B,IAA1B,CADuB;;AAGvB,uBAAO,OAAK,YAAL,CAAkB,UAAlB,CAA6B,EAAC,OAAO,KAAK,IAAL,EAArC,CAAP,CAHuB;eAAR,CAAjB,CAH8C;aAAT,CAAvC,CADS;;;;wCAYG;AACZ,gBAAI,OAAO,KAAK,OAAL,CAAa,KAAK,WAAL,CAAiB,KAAjB,CAApB,CADQ;AAEZ,iBAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,GAAwB,KAAK,IAAL,CAFZ;AAGZ,iBAAK,MAAL,CAAY,IAAZ,CAAiB,EAAjB,GAAsB,KAAK,EAAL,CAHV;AAIZ,iBAAK,SAAL,CAAe,OAAf,GAJY;;;;eA5BV;QAAsB;;AAoC5B,oBAAc,WAAd,GAA4B,8BAA5B;;+BAEQ","file":"query_editor.js","sourcesContent":["import {QueryCtrl} from 'app/plugins/sdk';\n\nclass SnapQueryCtrl extends QueryCtrl {\n\n  constructor($scope, $injector, uiSegmentSrv) {\n    super($scope, $injector);\n\n    this.uiSegmentSrv = uiSegmentSrv;\n    this.target.task = this.target.task || {name: 'select task', id: ''};\n    this.taskSegment = uiSegmentSrv.newSegment({\n      value: this.target.task.name\n    });\n\n    if (this.target.task.name === 'select task') {\n      this.taskSegment.fake = true;\n    }\n  }\n\n  getTasks() {\n    return this.datasource.getTasks().then(tasks => {\n      this.taskMap = {};\n\n      return tasks.map(task => {\n        this.taskMap[task.name] = task;\n\n        return this.uiSegmentSrv.newSegment({value: task.name});\n      });\n    });\n  }\n\n  taskChanged() {\n    var task = this.taskMap[this.taskSegment.value];\n    this.target.task.name = task.name;\n    this.target.task.id = task.id;\n    this.panelCtrl.refresh();\n  }\n}\n\nSnapQueryCtrl.templateUrl = 'datasource/query_editor.html';\n\nexport {SnapQueryCtrl};\n"]}